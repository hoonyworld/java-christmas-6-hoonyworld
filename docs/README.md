# 우아한테크코스 프리코스 4주차

## 🎄 미션 - 크리스마스 프로모션

### ✅ 핵심 기능

**서비스**

사용자가 선택한 메뉴의 주문 금액과 할인 혜택을 계산하고,증정 메뉴와 이벤트 배지를 제공

**목표**

중복된 할인과 증정을 허용해서, 고객들이 혜택을 많이 받는다는 것을 체감할 수 있게 하는 것

### ✅ 4주차 목표

함수를 분리하고, 각 함수별로 테스트를 작성

클래스(객체)를 분리하는 연습

특히, 클래스의 역할과 책임을 생각해 보고 클래스 작성 시 도메인 로직에 집중하는 방향으로 구현, UI는 도메인 로직과 분리하는 방향

도메인 로직에 대한 단위 테스트를 작성하는 연습

### ✅ 0점 방지 기본 규칙

- [X]  java -version 17 확인
- [X]  프로그램 구현 완료 시 `ApplicationTest`의 모든 테스트가 성공
- [X]  기능 구현을 모두 정상적으로 했더라도 요구사항에 명시된 출력값 형식을 지켜야 함
- [X]  `./gradlew.bat clean test` BUILD SUCCESSFUL 확인

### ✅ 기능 요구 사항

- [X]  크리스마스 디데이 할인
    - 이벤트 기간 : 2023.12.1 ~ 2023.12.25 (26일부터는 적용하지 X)
    - 12월 1일부터 할인금액 1000원 시작, 크리스마스가 다가올수록 할인금액 100원씩 증가
    - **총 주문금액**에서 해당 금액만큼 할인(ex. 12월 25일 : 총 주문금액 - 1000 + 100*24)
- [X]  평일 할인(**일요일** ~ 목요일)
    - 디저트 메뉴(초코케이크, 아이스크림) 1개당 2023원씩 할인
    - ex) 초코케이크 2개, 아이스크림 1개 → 2023 * 3 = 6069원 할인
- [X]  주말 할인(**금요일** ~ 토요일)
    - 메인 메뉴(티본스테이크, 바비큐립, 해산물파스타, 크리스마스파스타) 1개당 2023원씩 할인
    - ex) 티본1개, 바비큐1개, 해산물2개, 크리스마스1개 → 2023*5 = 10115원 할인
- [X]  특별 할인
    - 이벤트 달력에 별이 있으면 총 주문 금액에서 1,000원 할인
    - 별이 있는 일 : 3일, 10일, 17일, 24일, **25일**, 31일
- [X]  증정 이벤트
    - 할인 전 총주문 금액이 12만 원 이상일 때, 샴페인 1개 증정
    - 주의할 점은 **총 혜택 금액에는 포함되나 할인 후 예상 결제 금액에는 포함 X**
- [X]  이벤트 기간
    - 크리스마스 디데이 할인'을 제외한 다른 이벤트는 2023.12.1 ~ 2023.12.31 동안 적용
    - **즉, 크리스마스 디데이할인만 25일까지!!**
- [X]  배지 부여
    - 5천 원 이상: 별
    - 1만 원 이상: 트리
    - 2만 원 이상: 산타
- [X]  주의사항
    - 총주문 금액 10,000원 이상부터 이벤트가 적용
    - 음료만 주문 불가능
    - 메뉴는 한 번에 최대 20개까지만 주문 가능

### ✅ 개발 요청 사항

- [X]  고객들이 식당에 방문할 날짜와 메뉴를 미리 선택하면 이벤트 플래너가 주문 메뉴, 할인 전 총주문 금액, 증정 메뉴, 혜택 내역, 총혜택 금액, 할인 후 예상 결제 금액, 12월 이벤트 배지
  내용을 보여주기
- [X]  예상 방문 날짜를 입력받을 때, 요구 조건
    - 1 이상 31 이하의 숫자로만 입력받아야 함
    - 1 이상 31 이하의 숫자가 아닌 경우, "[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요."라는 에러 메시지 출력
    - 모든 에러 메시지는 "[ERROR]"로 시작
- [X]  주문하실 메뉴와 개수를 입력받을 때, 요구 조건
    - 고객이 메뉴판에 없는 메뉴를 입력하는 경우, "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지 출력
    - 메뉴의 개수는 1 이상의 숫자만 입력되도록 해주세요. 이외의 입력값은 "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지 출력
    - 메뉴 형식이 예시와 다른 경우, "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지 출력
    - 중복 메뉴를 입력한 경우(e.g. 시저샐러드-1,시저샐러드-1), "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."라는 에러 메시지 출력
    - 모든 에러 메시지는 "[ERROR]"로 시작
- [X]  주문 메뉴의 출력 순서는 자유롭게
- [X]  총혜택 금액에 따라 이벤트 배지의 이름을 다르게
- [X]  총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격
- [X]  할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 할인 금액
- [X]  증정 메뉴
    - 증정 이벤트에 해당하지 않는 경우, 증정 메뉴 "없음” 출력
- [X]  혜택 내역
    - 고객에게 적용된 이벤트 내역만 출력
    - 적용된 이벤트가 하나도 없다면 혜택 내역 "없음” 출력
    - 혜택 내역에 여러 개의 이벤트가 적용된 경우, 출력 순서는 자유롭게 출력
- [X]  이벤트 배지
    - 이벤트 배지가 부여되지 않는 경우, "없음” 출력

### ✅ 구현할 기능 목록(로직 진행 순서)

- [X]  예상 방문 날짜 입력 받는 메시지 출력
- [X]  예상 방문 날짜 입력 → 이때 예외처리
- [x]  입력 받은 예상 방문 날짜를 int형 예상 방문 날짜 변수에 저장
- [x]  주문하실 메뉴 및 메뉴 개수 입력 받는 메시지 출력
- [x]  주문하실 메뉴 및 메뉴 개수 입력 (ex 제로콜라-1) → 이때 예외처리
- [x]  입력받은 주문 메뉴 및 메뉴 개수를 split으로 분리 후 배열에 추가
- [x]  -를 기준으로 분리하고 결과를 Map 리스트에 추가
- [x]  12월 x일에 우테코 식당에서 받을 이벤트 혜택 미리 보기! 메시지 출력

→ 이때 x에 입력 받은 예상 방문 날짜를 포함하여 출력

- [X]  주문 메뉴/ 개수 구현 메서드 호출 → 한칸 개행 출력 후, entry.getKey().getName() + " " + entry.getValue() 형식으로 주문 리스트를 출력
- [X]  주문 메뉴 출력

다음과 같은 형식

   ```
   <주문 메뉴>
   티본스테이크 1개
   바비큐립 1개
   초코케이크 2개
   제로콜라 1개
   ```

- [X]  할인 전 총 금액 계산 메서드 호출 → 한칸 개행 출력 후, 메뉴 가격 * 개수를 주문 개수 만큼 해서 할인 전 총 금액 산출
- [X]  NumberFormat으로 뒤에서부터 세 칸마다 , 표시
- [X]  할인 전 총주문 금액 출력

다음과 같은 형식

   ```
   <할인 전 총주문 금액>
   142,000원
   ```

- [X]  증정 메뉴 여부 메서드 호출 → 한칸 개행 출력 후, if(할인 전 총주문 금액 ≥ 12만원)이면 “샴페인 1개” 문자열 출력, 조건문에 해당하지 않으면 “없음” 문자열 출력

다음과 같은 형식

   ```
   <증정 메뉴>
   샴페인 1개
   ```

- [X]  혜택 내역 계산 메서드 호출 → 한칸 개행 출력 후, 그 안에서 4개의 메서드 호출(크리스마스 디데이 할인 계산, 평일/주말 판단, 특별 할인 판단, 증정 이벤트 계산) → 만약 모든 메서드의 반환값이
  return“”;(isEmpty()) 이면 “없음” 문자열 출력

- [X] 크리스마스 디데이 할인 계산 → if( day ≥ 1 && day ≤25 )이면 할인 가격은 1000 + 100 * (day-1)이고, 할인 가격을 return “크리스마스 디데이 할인: -” +
  할인가격 + “원”
  조건문에 해당하지 않으면 return 0;

- [X] 평일/주말 판단 → 주말과 평일의 일수를 enum으로 관리 (WEEKDAY, WEEKEND)
- 주말 할인 계산 메서드 호출 → 입력한 일이 평일이면 return 0;, 입력한 일이 주말이면 할인 계산 → 메인메뉴 있으면 할인 계산, 없으면 return 0;,
- 평일 할인 계산 메서드 호출 -> 입력한 일이 주말이면 return 0;, 입력한 일이 평일이면 할인 계산 -> 디저트 메뉴 있으면 할인 계신, 없으면 return 0;
  계산 메서드 호출 → 디저트 메뉴 있으면 할인 계산, 없으면 return 0;

- [X] 특별 할인 판단 → 특별 할인 일수를 enum으로 관리 → 특별 할인 일이면 특별 할인 계산 메서드 호출, 조건문에 해당하지 않으면 return 0;

- [X] 증정 이벤트 계산 → 샴페인 증정 여부로 판단 → 증정했으면 return “샴페인 1개”, 증정하지 않았으면, return 0;

- [X]  혜택 내역을 보여주는 메시지 출력

다음과 같은 형식

   ```
   <혜택 내역>
   크리스마스 디데이 할인: -1,200원
   평일 할인: -4,046원
   특별 할인: -1,000원
   증정 이벤트: -25,000원
   ```

- [X]  한칸 개행 출력 후, 총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격을 계산하는 메서드를 호출 하고 값을 반환, 혜택 내역이 없다면 0을 반환
- [X]  총 혜택 금액을 보여주는 메시지 출력

다음과 같은 형식

   ```
   <총혜택 금액>
   -31,246원
   ```

- [X]  한칸 개행 출력 후, 할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 할인 금액의 합계(총혜택 금액 - 증정 메뉴의 가격)를 계산하는 메서드를 호출 하고 값을 반환, 총혜택 금액이 0원이면 할인 후
  예상 결제 금액 == 할인 전 총 주문 금액
- [X]  할인 후 예상 결제 금액을 보여주는 메시지 출력

다음과 같은 형식

   ```
   <할인 후 예상 결제 금액>
   135,754원
   ```

- [X]  한칸 개행 출력 후, 이벤트 배지 문자열을 반환하는 메서드 호출 → 총 혜택 금액 ≥ 20000이면 return “산타”; , 총 혜택 금액 ≥10000이면 return
  “트리”; , 총 혜택 금액 ≥ 5000이면 return “별”;, 조건문에 해당하지 않으면 “없음” 문자열 출력
- [X]  12월 이벤트 배지를 보여주는 메시지 출력

다음과 같은 형식

   ```
   <12월 이벤트 배지>
   산타
   ```

### ✅ 예외 처리 - IllegalArgumentException

********공통********

- [X]  예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 "[ERROR]"로 시작

---

**방문 날짜**

- [X]  방문 날짜를 입력할 때 숫자가 아닌 게 포함된 경우
- [X]  방문 날짜를 입력할 때 공백이 들어갈 경우
- [X]  방문 날짜를 입력할 때 1 이상 31 이하의 숫자가 아닌 경우

---

**메뉴와 메뉴 개수**

- [x]  메뉴판에 없는 메뉴를 입력하는 경우
- [x]  메뉴의 개수를 입력할 때 정수가 아닌 게 포함된 경우
- [x]  메뉴와 메뉴의 개수를 입력할 때 공백이 들어갈 경우
- [x]  메뉴의 개수를 입력할 때 1 이상의 정수가 아닌 경우
- [x]  입력한 메뉴 형식이 예시와 다른 경우
- [x]  중복 메뉴를 입력한 경우

---

### ✅ 프로그래밍 요구 사항

> **제출 전 확인 리스트**
>
> - [X]  JDK-17 사용
> - [X]  프로그램 실행의 시작점은 `Application`의 `main()`
> - [X]  `build.gradle` 변경 불가, 외부 라이브러리 사용 금지
> - [X]  [Java 코드 컨벤션](https://github.com/woowacourse/woowacourse-docs/tree/master/styleguide/java)가이드를 준수하며 프로그래밍
> - [X]  프로그램 종료 시`System.exit()`를 호출 X
> - [X]  프로그램 구현 완료 시 `ApplicationTest`의 모든 테스트가 성공
> - [X]  프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동 X
> - [X]  indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현, 2까지만 허용
> - [X]  3항 연산자 사용 X
> - [X]  함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들 것
> - [X]  JUnit 5와 AssertJ를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인
> - [X]  함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현
> - [X]  함수(또는 메서드)가 한 가지 일만 잘하도록 구현
> - [X]  else, switch/case를 쓰지 X (if 조건절에서 값을 return 하는 방식으로 구현)
> - [X]  Java Enum을 적용
> - [X]  도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(System.out, System.in, Scanner) 로직은 제외한다.
> - [X]  핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 분리해 구현한다
> - [X]  사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`을 발생 시킨 후 “[ERROR]”로 시작하는 에러 메시지 출력 후 그 부분부터 입력을 다시
    받음. `Exception`이 아닌 , `IllegalStateException` 등과 같은 명확한 유형을 처리함.
>
> **추가된 요구 사항**
>
> - [X]  아래 있는`InputView`,`OutputView`클래스를 참고하여 입출력 클래스를 구현
> - [X]  입력과 출력을 담당하는 클래스를 별도로 구현
> - [X]  해당 클래스의 패키지, 클래스명, 메서드의 반환 타입과 시그니처는 자유롭게 구현 가능
>
>  **라이브러리 요구 사항**
>
> - [X]  `camp.nextstep.edu.missionutils`에서 제공하는 `Console` API를 사용하여 구현
    >
    >     사용자가 입력하는 값은`camp.nextstep.edu.missionutils.Console`의`readLine()`을 활용
>

### ✅ 과제 진행 요구 사항

- [X]  [java-christmas-6](https://github.com/woowacourse-precourse/java-christmas-6)저장소를 비공개 저장소로 생성
- [X]  기능 구현 전 docs/README.md에 구현할 기능 목록을 정리해 추가
- [X]  Git의 커밋 단위는 앞 단계에서`docs/README.md`에 정리한 기능 목록 단위로 추가
- [X]  우아한테크코스 지원 플랫폼에 소감 작성 후 제출
- [X]  제출한 후 결과 확인, 통과하지 못했다면 수정해 다시 제출

### ✅ 추가 학습 목표

- [X]  1,2,3주차 공통 피드백 코드에 적용
- [X]  프리코스가 끝나고 나서 어떻게 성장을 위해 나아갈 것인지 목표세우기